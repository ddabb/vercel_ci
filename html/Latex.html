<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaTeX Online Editor</title>
    <!-- 引入 MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- 引入 Ace Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <style>
        #editor {
            width: 100%;
            height: 500px;
        }

        #preview {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            white-space: pre-wrap;
        }
    </style>
</head>

<body>
    <div id="editor"></div>
    <button onclick="renderLaTeX()">Render LaTeX</button>
    <div id="preview"></div>

    <script>
        // 初始化 Ace Editor
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/latex");
        editor.setFontSize(16);
        editor.setOption("wrap", "free");

        // 渲染 LaTeX 的函数
        function renderLaTeX() {
            var latex = editor.getValue();
            var preview = document.getElementById("preview");
            preview.innerHTML = ''; // 清空预览区域

            // 使用 MathJax 渲染 LaTeX
            MathJax.typesetPromise([preview]).then(() => {
                console.log('LaTeX rendered successfully.');
            }).catch((err) => console.error('Error rendering LaTeX:', err));
        }
    </script>
</body>

</html>